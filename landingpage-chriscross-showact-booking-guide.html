<!DOCTYPE html> 
<html lang="de"> 
<head> 
<meta charset="utf-8" /> 
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" /> 
<title>Show Booking Guide – Chris Cross</title> 
<style> 
:root{ 
--bg:#0b0b0c;--fg:#f4f4f5;--muted:#a1a1aa;--accent:#22c55e;--stroke:#1e1e21;--glass:#0000005c; 
} 
*{box-sizing:border-box} 
html,body{margin:0;height:100%;background:var(--bg);color:var(--fg);font-family:ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Inter,Helvetica,Arial} 
a{color:inherit} 

/* ===== LANGUAGE GATE (NEW) ===== */
#lang{position:fixed;inset:0;display:flex;align-items:center;justify-content:center;background:var(--bg);z-index:9999}
.lang-box{background:#141417;border:1px solid var(--stroke);border-radius:16px;box-shadow:0 10px 30px #000a;padding:24px;max-width:520px;width:92%}
.lang-title{margin:0 0 14px;text-align:center;font-size:clamp(20px,3.2vw,26px);font-weight:900}
.lang-sub{margin:0 0 18px;color:#a1a1aa;text-align:center}
.lang-buttons{display:flex;gap:12px;justify-content:center}
.btn-lang{appearance:none;border:1px solid #ffffff26;background:#0000009c;color:var(--fg);border-radius:999px;padding:12px 16px;cursor:pointer;font-weight:700;min-width:140px}
.btn-lang.primary{background:var(--accent);border-color:transparent;color:#072a12}

/* ===== FULL-BLEED STAGE (Step View) ===== */ 
#stage{position:relative;width:100vw;height:100vh;overflow:hidden;display:none;background:#000} 
#stage.active{display:block} 
.gallery{position:absolute;inset:0;display:flex;gap:0;overflow:hidden} 
.gallery.vertical{flex-direction:column;overflow-y:auto;-webkit-overflow-scrolling:touch} 
.option{flex:1 1 0;position:relative;cursor:pointer;outline:none} 
.option img{width:100%;height:100%;object-fit:cover;display:block;transition:transform .18s ease-out;will-change:transform} 
.option:hover img{transform:scale(1.05)} 
.option:focus-visible img{transform:scale(1.05)} 
/* Centered overlay content on image */ 
.opt-center{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);text-align:center;display:flex;flex-direction:column;align-items:center;gap:8px;pointer-events:none} 
.opt-box{background:#000000cc;backdrop-filter:saturate(140%) blur(4px);border-radius:16px;box-shadow:0 0 0 1px #ffffff22;padding:12px 16px;max-width:min(86vw,680px)} 
.opt-title{font-weight:900;font-size:clamp(20px,4.4vw,38px);line-height:1.05;margin:0} 
.opt-desc{margin-top:6px;font-size:clamp(14px,2.6vw,17px);color:#e4e4e7;text-shadow:0 1px 2px #0009} 
/* Sticky question at the very top – bold + uppercase + solid black */ 
.question{position:fixed;z-index:7;top:calc(env(safe-area-inset-top,0px));left:0;right:0;display:flex;justify-content:center;pointer-events:none} 
.question .q-wrap{margin:8px auto 0;background:#000;border:1px solid #1f1f1f;box-shadow:0 2px 20px #000c;border-radius:14px;padding:14px 20px;font-weight:900;letter-spacing:.3px;text-transform:uppercase;font-size:clamp(20px,3.4vw,30px);} 
/* Corner Controls (moved to bottom) */ 
.corner{position:fixed;z-index:8;display:flex;gap:8px} 
.corner.left{bottom:calc(env(safe-area-inset-bottom,0px) + 10px);left:8px} 
.corner.right{bottom:calc(env(safe-area-inset-bottom,0px) + 10px);right:8px} 
.btn{appearance:none;border:1px solid #ffffff26;background:#0000009c;backdrop-filter:saturate(140%) blur(4px);color:var(--fg);border-radius:999px;padding:8px 12px;cursor:pointer} 

/* Disabled/Placeholder Button */
.btn.disabled,
.btn[disabled]{opacity:.5;cursor:default;pointer-events:none}

/* Progress Dots bottom center */ 
.progress{position:fixed;z-index:6;bottom:8px;left:50%;transform:translateX(-50%);display:flex;gap:8px} 
.dot{width:8px;height:8px;border-radius:50%;background:#2a2a2f;border:1px solid #313137} 
.dot.active{background:var(--accent);border-color:var(--accent)} 
/* ===== RESULTS (padded content) ===== */ 
#results{display:none} 
.wrap{max-width:1100px;margin:0 auto;padding:24px} 
.step.center h1{margin:0 0 10px;text-align:center;text-transform:uppercase;letter-spacing:.4px;font-size:clamp(22px,3.2vw,34px)} 
.step.center p{color:#a1a1aa;text-align:center;margin:0 0 18px} 
.grid{display:grid;grid-template-columns:repeat(3,1fr);gap:16px} 
@media (max-width:900px){.grid{grid-template-columns:repeat(2,1fr)}} 
@media (max-width:640px){.grid{grid-template-columns:1fr}} 
.card{background:#141417;border:1px solid var(--stroke);border-radius:16px;overflow:hidden;display:flex;flex-direction:column} 
.media{position:relative;aspect-ratio:16/9;background:#0f0f12} 
.media img{position:absolute;inset:0;width:100%;height:100%;object-fit:cover} 
.badge{position:absolute;left:10px;top:10px;background:#000a;border:1px solid #ffffff24;border-radius:999px;padding:6px 10px;font-size:12px} 
.content{padding:14px 16px 16px} 
.title{font-size:18px;margin:0 0 6px} 
.desc{color:#a1a1aa;font-size:14px;margin:0} 
.summary{display:flex;gap:8px;flex-wrap:wrap;margin-top:8px} 
.chip{font-size:12px;border:1px solid var(--stroke);color:#d4d4d8;border-radius:999px;padding:4px 8px} 
.nav{display:flex;justify-content:space-between;align-items:center;margin:12px 0 28px} 
.btn.primary{background:var(--accent);border-color:transparent;color:#072a12;font-weight:700} 
.panel{background:#141417;border:1px solid var(--stroke);border-radius:16px;padding:16px} 
.panel h2{margin:0 0 10px;font-size:20px} 
.panel.slim{background:#0f0f12;border-color:#232327;padding:12px;border-radius:12px} 
.panel.slim h2{font-size:16px;font-weight:700;margin:0 0 8px} 
.form-row{display:flex;flex-direction:column;gap:8px;margin:10px 0} 
label{font-size:14px;color:#d4d4d8} 
input[type="email"],textarea{width:100%;padding:12px 14px;border-radius:12px;border:1px solid var(--stroke);background:#111114;color:#f7f7f9} 
.hint{color:#a1a1aa;font-size:12px} 
.success{display:none;background:#0f2619;border:1px solid #134e2a;color:#d1fae5;padding:14px;border-radius:12px;margin-top:10px} 
.error{display:none;background:#2a1111;border:1px solid #6b1d1d;color:#fee2e2;padding:14px;border-radius:12px;margin-top:10px} 
.footer-note{margin-top:16px;color:#a1a1aa;font-size:12px} 
</style> 
</head> 
<body> 

<!-- LANGUAGE GATE (NEW) -->
<section id="lang" aria-modal="true" role="dialog">
  <div class="lang-box">
    <h2 class="lang-title">Sprache wählen / Choose language</h2>
    <p class="lang-sub">Bitte wählen Sie Ihre Sprache aus · Please choose your language</p>
    <div class="lang-buttons">
      <button class="btn-lang primary" id="btn-de">Deutsch</button>
      <button class="btn-lang" id="btn-en">English</button>
    </div>
  </div>
</section>

<!-- FULL-BLEED STEP STAGE --> 
<section id="stage" class="active" aria-live="polite"></section> 

<!-- RESULTS --> 
<section id="results"> 
<div class="wrap"> 
<div class="step center"> 
<h1>Ihre Empfehlung</h1> 
<p>Basierend auf Ihren Antworten haben wir passende Shows für Sie ausgewählt.</p> 
</div> 
<div id="rec-grid" class="grid"></div> 

<!-- Kleine Auswahl-Box unter den Empfehlungen --> 
<div class="panel slim" style="margin-top:16px"> 
<h2>Ihre Auswahl</h2> 
<div id="chosen" class="summary"></div> 
</div> 

<!-- RESTART -->
<div class="nav" style="margin-top:8px">
  <button class="btn" type="button" id="restart-btn">Erneut starten</button>
</div>
<!-- /RESTART -->

<!-- Danach direkt die Mail/Anfrage --> 
<div class="panel" style="margin-top:16px"> 
<h2>Möchten Sie ein unverbindliches Angebot erhalten?</h2> 
<form id="offer-form" novalidate> 
<div class="form-row"> 
<label for="email">E-Mail für das Angebot <span class="hint">(Pflichtfeld)</span></label> 
<input type="email" id="email" name="email" required placeholder="z. B. max.mustermann@example.com" /> 
<div class="hint">Wir nutzen Ihre E-Mail ausschließlich zur Beantwortung Ihrer Anfrage.</div> 
</div> 
<div class="form-row"> 
<label for="message">Zusatzinfos (optional)</label> 
<textarea id="message" name="message" rows="4" placeholder="Ort, Datum, Uhrzeit, Bühne/Location, Besonderheiten…"></textarea> 
</div> 
<input type="text" name="company" id="company" style="display:none" tabindex="-1" autocomplete="off" /> 
<div class="nav"> 
<button class="btn primary" type="submit">Unverbindliches Angebot anfordern</button> 
<button class="btn" type="button" id="mailto-btn">oder per E-Mail anfragen</button> 
<div class="summary" aria-live="polite"><span class="chip" id="selection-count">0 ausgewählt</span></div> 
</div> 
<div id="success" class="success" role="status">Vielen Dank! Wir kümmern uns zeitnah um Ihre Anfrage.</div> 
<div id="error" class="error" role="alert">Ups – das hat nicht geklappt. Bitte prüfen Sie Ihre Eingaben oder versuchen Sie es per E-Mail.</div> 
</form> 
<p class="footer-note">Direktkontakt: <a href="mailto:info@chriscross.at">info@chriscross.at</a> · Tel. +43 650 92 555 11</p> 
</div> 
</div> 
</section> 

<script> 
// ============================== 
// I18N (NEW) 
// ============================== 
const I18N = {
  de: {
    badge: 'Empfehlung',
    back: 'Zurück',
    openOption: 'Offen',

    rec_title: 'Ihre Empfehlung',
    rec_intro: 'Basierend auf Ihren Antworten haben wir passende Shows für Sie ausgewählt.',
    selection_title: 'Ihre Auswahl',
    contact_title: 'Möchten Sie ein unverbindliches Angebot erhalten?',
    email_label: 'E-Mail für das Angebot',
    email_required: '(Pflichtfeld)',
    email_privacy: 'Wir nutzen Ihre E-Mail ausschließlich zur Beantwortung Ihrer Anfrage.',
    message_label: 'Zusatzinfos (optional)',
    message_ph: 'Ort, Datum, Uhrzeit, Bühne/Location, Besonderheiten…',
    submit_btn: 'Unverbindliches Angebot anfordern',
    mailto_btn: 'oder per E-Mail anfragen',
    success_msg: 'Vielen Dank! Wir kümmern uns zeitnah um Ihre Anfrage.',
    error_msg_generic: 'Ups – das hat nicht geklappt. Bitte prüfen Sie Ihre Eingaben oder versuchen Sie es per E-Mail.',
    email_invalid: 'Bitte geben Sie eine gültige E-Mail-Adresse ein.',
    footer_label: 'Direktkontakt:',
    restart: 'Erneut starten',
    selected_chip: '{n} ausgewählt',
    watch_video: 'Video ansehen',
    video_placeholder: 'Video zurzeit in Bearbeitung',
    mail_subject: 'Unverbindliche Show-Anfrage',

    q_team: 'Wie viele Künstler:innen sind gewünscht?',
    team_solo: 'Solo', team_solo_desc: 'Ein/e Künstler:in',
    team_duo: 'Duo–Trio', team_duo_desc: '2–3 Artists',
    team_group: 'Gruppe (4+)', team_group_desc: 'ab 4 Artists',

    q_tech: 'Wie soll die Show wirken?',
    tech_high: 'High-Tech Visuals', tech_high_desc: 'Laser/LED/Mapping',
    tech_pure: 'Tanz pur', tech_pure_desc: 'ohne Spezialtechnik',

    q_time: 'Wann ist die Veranstaltung?',
    time_lt1: '< 1 Monat', time_1to2: '1–2 Monate', time_gt2: '> 2 Monate',

    q_impact: 'Wie soll die Show sein?',
    impact_wow: 'Wow-Moment', impact_deep: 'Tieferer Sinn',

    q_custom: 'Konkrete Individualisierungen gewünscht?',
    custom_yes: 'Ja', custom_no: 'Nein',

    q_budget: 'Wo liegt Ihr Budget ungefähr?',
    budget_b1: 'bis 1.000 €',
    budget_b3: 'bis 3.000 €',
    budget_open: 'offen',

    meta_group_solo: 'Solo',
    meta_group_duo: 'Duo/Trio',
    meta_group_group: 'Gruppe',
    meta_tech_pure: 'Tanz pur',
    meta_tech_high: 'High-Tech',
    meta_duration: 'Dauer: {txt}',
    dur_short: 'Bis zu 6 Min',
    dur_mid: 'Bis zu 8 Min',
    dur_long: 'Bis zu 12 Min',
    meta_setup: 'Setup: {lvl}',
    setup_low: 'Wenig',
    setup_med: 'Etwas',
    setup_high: 'Hoch',

    // Descriptions
    d_laser: 'Spektakuläre Laserperformance mit präzisen Choreografien – ideal für Wow-Momente.',
    d_ledsolo: 'Dynamische LED-Show mit starken musikalischen Akzenten – kompakt einsetzbar.',
    d_mapping: 'Visionen zum Leuchten bringen. Komplexe Inhalte in klare, emotionale Bühnenbilder.',
    d_ledgroup: 'Synchron leuchtende Energie. Skalierbar für Events jeder Art und Größe.',
    d_urbansolo: 'Reine Tanzkraft ohne Spezialtechnik – schnell und flexibel umsetzbar.',
    d_urbangroup: 'Kraftvoll, choreografisch flexbibel, vielseitig skalierbar.',
    d_custom: 'Individuell konzipierte Show – maximaler Fit zur Marke, Event und Story.',
    d_lederhose: 'Tradition trifft Urban Dance – mitreißender Publikumsmagnet.',
    d_breaking: 'Musikalität, Akrobatik und Charakter – vom ersten Takt bis zum Finalen Freeze.',
    d_christmas: 'Christmas Vibes, die Stimmung bringt. Bereit für jede Bühne.',
    d_mirror: 'Lebende Spiegel. Glanz in Bewegung. Edel, modern, unvergesslich.',
    d_comedy: 'Die Tanzshow mit der Pointe. Comedy, die man sieht und fühlt.',
    d_ultimate: 'Unsere Königsklasse im Solo. Perfekt abgestimmt, maximal immersiv.',
  },
  en: {
    badge: 'Recommendation',
    back: 'Back',
    openOption: 'Open',

    rec_title: 'Your Recommendation',
    rec_intro: 'Based on your answers we selected fitting shows for you.',
    selection_title: 'Your Selection',
    contact_title: 'Would you like to receive a non-binding offer?',
    email_label: 'Email for the offer',
    email_required: '(required)',
    email_privacy: 'We only use your email to answer your request.',
    message_label: 'Additional info (optional)',
    message_ph: 'Venue, date, time, stage/location, special requirements…',
    submit_btn: 'Request non-binding offer',
    mailto_btn: 'or ask via email',
    success_msg: 'Thank you! We will get back to you shortly.',
    error_msg_generic: 'Oops—something went wrong. Please check your input or try via email.',
    email_invalid: 'Please enter a valid email address.',
    footer_label: 'Direct contact:',
    restart: 'Start over',
    selected_chip: '{n} selected',
    watch_video: 'Watch video',
    video_placeholder: 'Video currently in production',
    mail_subject: 'Non-binding show inquiry',

    q_team: 'How many artists would you like?',
    team_solo: 'Solo', team_solo_desc: 'One artist',
    team_duo: 'Duo–Trio', team_duo_desc: '2–3 artists',
    team_group: 'Group (4+)', team_group_desc: 'from 4 artists',

    q_tech: 'How should the show feel?',
    tech_high: 'High-tech visuals', tech_high_desc: 'Laser/LED/Mapping',
    tech_pure: 'Pure dance', tech_pure_desc: 'no special tech',

    q_time: 'When is the event?',
    time_lt1: '< 1 month', time_1to2: '1–2 months', time_gt2: '> 2 months',

    q_impact: 'What kind of impact?',
    impact_wow: 'Wow moment', impact_deep: 'Deeper meaning',

    q_custom: 'Do you need customizations?',
    custom_yes: 'Yes', custom_no: 'No',

    q_budget: 'What’s your approximate budget?',
    budget_b1: 'up to €1,000',
    budget_b3: 'up to €3,000',
    budget_open: 'open',

    meta_group_solo: 'Solo',
    meta_group_duo: 'Duo/Trio',
    meta_group_group: 'Group',
    meta_tech_pure: 'Pure dance',
    meta_tech_high: 'High-tech',
    meta_duration: 'Duration: {txt}',
    dur_short: 'Up to 6 min',
    dur_mid: 'Up to 8 min',
    dur_long: 'Up to 12 min',
    meta_setup: 'Setup: {lvl}',
    setup_low: 'Low',
    setup_med: 'Medium',
    setup_high: 'High',

    // Descriptions
    d_laser: 'Spectacular laser performance with precise choreography — perfect for wow moments.',
    d_ledsolo: 'Dynamic LED show with strong musical accents — compact and versatile.',
    d_mapping: 'Bring visions to light. Complex content turned into clear, emotional stage images.',
    d_ledgroup: 'Synchronized glow and energy. Scalable for events of any size.',
    d_urbansolo: 'Pure dance power without special tech — fast and flexible.',
    d_urbangroup: 'Powerful, choreographically flexible, highly scalable.',
    d_custom: 'Individually conceived show — maximum fit for brand, event and story.',
    d_lederhose: 'Tradition meets urban dance — a captivating crowd-pleaser.',
    d_breaking: 'Musicality, acrobatics and character — from the first beat to the final freeze.',
    d_christmas: 'Christmas vibes that lift the mood. Ready for any stage.',
    d_mirror: 'Living mirrors. Shine in motion. Elegant, modern, unforgettable.',
    d_comedy: 'A dance show with a punchline. Comedy you can see and feel.',
    d_ultimate: 'Our solo crown class. Perfectly tuned, maximally immersive.',
  }
};

let STEPS; // will be built per language

function t(key, params){
  const lang = state.lang || 'de';
  let s = (I18N[lang] && I18N[lang][key]) || (I18N.de[key]||'');
  if(params){
    Object.keys(params).forEach(k=>{ s = s.replace(new RegExp(`\\{${k}\\}`,'g'), params[k]); });
  }
  return s;
}
function displayTitle(show){
  if((state.lang||'de')==='en' && show.title_en){ return show.title_en; }
  return show.title;
}

// ============================== 
// KONFIGURATION 
// ============================== 
const FORM_ENDPOINT = ""; // z. B. Formspree/Netlify/Apps Script 
const FALLBACK_EMAIL = "info@chriscross.at"; 
const VIDEO_FALLBACK = 'placeholder'; // 'placeholder' | 'none'
const pic = (seed) => `https://picsum.photos/seed/${encodeURIComponent(seed)}/1600/900`; 

// Show-Daten (aus Tabelle, leicht normalisiert) 
const SHOWS = [ 
{id:'urban-solo', title:'Urban Dance Solo Show', title_en:'Urban Dance Solo Show', maxDancers:1, technik:'Nein', individual:'Nein', budget:'Klein', fertige:true, laenge:'Kurz', anforderungen:'Wenig', spontan:true, art:'Gemischt', img:"https://raw.githubusercontent.com/ChrisCrossAT/website/main/urban-dance-solo-16x9-1600w.avif", 
  video:{ landscape:'https://vimeo.com/1113759515/7588b41240', portrait:'https://vimeo.com/1113760039/b4172928d0' } }, 
{id:'urban-group', title:'Urban Dance Group Show', title_en:'Urban Dance Group Show', maxDancers:30, technik:'Nein', individual:'Ja', budget:'Mittel', fertige:true, laenge:'Lang', anforderungen:'Wenig', spontan:false, art:'Gemischt', img:"https://raw.githubusercontent.com/ChrisCrossAT/website/main/urban-dance-group-16x9-1600w.avif", video:'#'}, 
{id:'mapping-solo', title:'Mapping Dance Show', title_en:'Mapping Dance Show', maxDancers:1, technik:'Ja', individual:'Ja', budget:'Mittel', fertige:true, laenge:'Lang', anforderungen:'Etwas', spontan:true, art:'Gemischt', img:"https://raw.githubusercontent.com/ChrisCrossAT/website/main/mapping-dance-16x9-1600w.avif", 
  video:{ landscape:'https://vimeo.com/1113757891/f606e7cb1c', portrait:'https://vimeo.com/1113758721/ffe14fdf28?share=copy' } }, 
{id:'laser-solo', title:'Laser Show', title_en:'Laser Show', maxDancers:1, technik:'Ja', individual:'Nein', budget:'Hoch', fertige:true, laenge:'Mittel', anforderungen:'Hoch', spontan:false, art:'Wow-Effekt', img:"https://raw.githubusercontent.com/ChrisCrossAT/website/main/laser-16x9-1600w.avif", video:'#'}, 
{id:'led-group', title:'LED Group Dance Show', title_en:'LED Group Dance Show', maxDancers:10, technik:'Ja', individual:'Ja', budget:'Mittel', fertige:true, laenge:'Lang', anforderungen:'Etwas', spontan:false, art:'Wow-Effekt', img:"https://raw.githubusercontent.com/ChrisCrossAT/website/main/led-group-16x9-1600w.avif", 
  video:{ landscape:'https://vimeo.com/1113711352/48b23909ec', portrait:'https://vimeo.com/1113712096/8aef1f50d2' } }, 
{id:'led-solo', title:'LED Solo Dance Show', title_en:'LED Solo Dance Show', maxDancers:1, technik:'Ja', individual:'Ja', budget:'Klein', fertige:false, laenge:'Mittel', anforderungen:'Wenig', spontan:true, art:'Gemischt', img:"https://raw.githubusercontent.com/ChrisCrossAT/website/main/led-solo-16x9-1600w.avif", video:'#'}, 
{id:'custom', title:'Maßgeschneiderte Show', title_en:'Tailor-Made Show', maxDancers:30, technik:'Beides', individual:'Ja', budget:'Hoch', fertige:false, laenge:'Lang', anforderungen:'Wenig', spontan:false, art:'Gemischt', img:"https://raw.githubusercontent.com/ChrisCrossAT/website/main/tailor-made-16x9-1600w.avif", 
  video:{ landscape:'https://vimeo.com/1113763160/dc2d126920', portrait:'https://vimeo.com/1113761529/8b2a98d8e6' } }, 
{id:'lederhose', title:'Lederhose meets Breakdance', title_en:'Lederhose meets Breakdance', maxDancers:12, technik:'Nein', individual:'Ja', budget:'Mittel', fertige:true, laenge:'Mittel', anforderungen:'Wenig', spontan:false, art:'Wow-Effekt', img:"https://raw.githubusercontent.com/ChrisCrossAT/website/main/lederhose-breakdance-16x9-1600w.avif", 
  video:{ landscape:'https://vimeo.com/1113705980/7bc9a62390', portrait:'https://vimeo.com/1113709979/7b5f5e95c0' } }, 
{id:'breaking', title:'Breaking Show', title_en:'Breaking Show', maxDancers:8, technik:'Nein', individual:'Ja', budget:'Mittel', fertige:true, laenge:'Mittel', anforderungen:'Wenig', spontan:false, art:'Wow-Effekt', img:"https://raw.githubusercontent.com/ChrisCrossAT/website/main/breaking-16x9-1600w.avif",
  video:{ landscape:'https://vimeo.com/1113705980/7bc9a62390', portrait:'https://vimeo.com/1113709979/7b5f5e95c0' } },
{id:'christmas', title:'Christmas Dance Show', title_en:'Christmas Dance Show', maxDancers:12, technik:'Nein', individual:'Ja', budget:'Mittel', fertige:true, laenge:'Mittel', anforderungen:'Wenig', spontan:true, art:'Gemischt', img:"https://raw.githubusercontent.com/ChrisCrossAT/website/main/christmas-16x9-1600w.avif", video:'#'},
{id:'mirror', title:'Mirror Dance Show', title_en:'Mirror Dance Show', maxDancers:10, technik:'Nein', individual:'Ja', budget:'Mittel', fertige:true, laenge:'Mittel', anforderungen:'Etwas', spontan:false, art:'Wow-Effekt', img:"https://raw.githubusercontent.com/ChrisCrossAT/website/main/mirror-dance-16x9-1600w.avif", video:'#'},
{id:'comedy', title:'Comedy Dance Show', title_en:'Comedy Dance Show', maxDancers:8, technik:'Nein', individual:'Ja', budget:'Mittel', fertige:true, laenge:'Mittel', anforderungen:'Wenig', spontan:true, art:'Gemischt', img:"https://raw.githubusercontent.com/ChrisCrossAT/website/main/comedy-16x9-1600w.avif", video:'#'},
{id:'ultimate-solo', title:'Ultimate Solo Dance Show', title_en:'Ultimate Solo Dance Show', maxDancers:1, technik:'Ja', individual:'Ja', budget:'Hoch', fertige:true, laenge:'Lang', anforderungen:'Etwas', spontan:false, art:'Wow-Effekt', img:"https://raw.githubusercontent.com/ChrisCrossAT/website/main/ultimate-16x9-1600w.avif", video:'#'}
]; 

// Schritte werden pro Sprache gebaut
function buildSteps(lang){
  return [ 
    { id:'team', q:t('q_team'), options:[ 
      {label:t('team_solo'), value:'Solo', desc:t('team_solo_desc'), img:"https://raw.githubusercontent.com/ChrisCrossAT/website/main/solo-16x9-1600w.avif"}, 
      {label:t('team_duo'), value:'DuoTrio', desc:t('team_duo_desc'), img:"https://raw.githubusercontent.com/ChrisCrossAT/website/main/duo-trio-16x9-1600w.avif"}, 
      {label:t('team_group'), value:'Group4', desc:t('team_group_desc'), img:"https://raw.githubusercontent.com/ChrisCrossAT/website/main/group-16x9-1600w.avif"}, 
      {label:t('openOption'), value:'Offen', ghost:true} 
    ]}, 
    { id:'tech', q:t('q_tech'), options:[ 
      {label:t('tech_high'), value:'HighTech', desc:t('tech_high_desc'), img:"https://raw.githubusercontent.com/ChrisCrossAT/website/main/high-tech-16x9-1600w.avif"}, 
      {label:t('tech_pure'), value:'NoTech', desc:t('tech_pure_desc'), img:"https://raw.githubusercontent.com/ChrisCrossAT/website/main/pure-dance-16x9-1600w.avif"}, 
      {label:t('openOption'), value:'Offen', ghost:true} 
    ]}, 
    { id:'time', q:t('q_time'), options:[ 
      {label:t('time_lt1'), value:'lt1', img:"https://raw.githubusercontent.com/ChrisCrossAT/website/main/event-early-16x9-1600w.avif"}, 
      {label:t('time_1to2'), value:'1to2', img:"https://raw.githubusercontent.com/ChrisCrossAT/website/main/event-middle-16x9-1600w.avif"}, 
      {label:t('time_gt2'), value:'gt2', img:"https://raw.githubusercontent.com/ChrisCrossAT/website/main/event-late-16x9-1600w.avif"} 
    ]}, 
    { id:'impact', q:t('q_impact'), options:[ 
      {label:t('impact_wow'), value:'Wow', img:"https://raw.githubusercontent.com/ChrisCrossAT/website/main/wow-effect-16x9-1600w.avif"}, 
      {label:t('impact_deep'), value:'Deep', img:"https://raw.githubusercontent.com/ChrisCrossAT/website/main/story-16x9-1600w.avif"}, 
      {label:t('openOption'), value:'Offen', ghost:true} 
    ]}, 
    { id:'custom', q:t('q_custom'), options:[ 
      {label:t('custom_yes'), value:'Ja', img:"https://raw.githubusercontent.com/ChrisCrossAT/website/main/individualization-yes-16x9-1600w.avif"}, 
      {label:t('openOption'), value:'Offen', ghost:true}, 
      {label:t('custom_no'), value:'Nein', img:"https://raw.githubusercontent.com/ChrisCrossAT/website/main/individualization-no-16x9-1600w.avif"} 
    ]}, 
    { id:'budget', q:t('q_budget'), options:[ 
      {label:t('budget_b1'), value:'b1', img:"https://raw.githubusercontent.com/ChrisCrossAT/website/main/budget-low-16x9-1600w.avif"}, 
      {label:t('budget_b3'), value:'b3', img:"https://raw.githubusercontent.com/ChrisCrossAT/website/main/budget-middle-16x9-1600w.avif"}, 
      {label:t('budget_open'), value:'offen', img:"https://raw.githubusercontent.com/ChrisCrossAT/website/main/budget-high-16x9-1600w.avif"} 
    ]} 
  ];
}

// STATE 
const state = {answers:{}, i:0, mode:'steps', lang:'de'}; 
const stage = document.getElementById('stage'); 

function setLang(lang){
  state.lang = lang || 'de';
  document.documentElement.setAttribute('lang', state.lang);
  STEPS = buildSteps(state.lang);
  applyStaticTexts();
}

function applyStaticTexts(){
  // Results header + intro
  const h1 = document.querySelector('.step.center h1');
  const p  = document.querySelector('.step.center p');
  if(h1) h1.textContent = t('rec_title');
  if(p)  p.textContent  = t('rec_intro');

  // Selection box title
  const selH2 = document.querySelector('.panel.slim h2');
  if(selH2) selH2.textContent = t('selection_title');

  // Restart button
  const rb = document.getElementById('restart-btn');
  if(rb) rb.textContent = t('restart');

  // Contact panel (fixed: target non-slim panel specifically)
  const contactH2 = document.querySelector('#results .panel:not(.slim) h2');
  if(contactH2) contactH2.textContent = t('contact_title');

  const emailLabel = document.querySelector('label[for="email"]');
  if(emailLabel) emailLabel.innerHTML = `${t('email_label')} <span class="hint">${t('email_required')}</span>`;

  const emailInput = document.getElementById('email');
  if(emailInput) emailInput.placeholder = (state.lang==='de' ? 'z. B. max.mustermann@example.com' : 'e.g. jane.doe@example.com');

  const emailHint = document.querySelector('#email + .hint');
  if(emailHint) emailHint.textContent = t('email_privacy');

  const msgLabel = document.querySelector('label[for="message"]');
  if(msgLabel) msgLabel.textContent = t('message_label');

  const msgArea = document.getElementById('message');
  if(msgArea) msgArea.placeholder = t('message_ph');

  const submitBtn = document.querySelector('button[type="submit"].primary');
  if(submitBtn) submitBtn.textContent = t('submit_btn');

  const mailtoBtn = document.getElementById('mailto-btn');
  if(mailtoBtn) mailtoBtn.textContent = t('mailto_btn');

  const successEl = document.getElementById('success');
  if(successEl) successEl.textContent = t('success_msg');

  const errorEl = document.getElementById('error');
  if(errorEl) errorEl.textContent = t('error_msg_generic');

  const selCount = document.getElementById('selection-count');
  if(selCount) selCount.textContent = t('selected_chip', {n: 0});

  const footer = document.querySelector('.footer-note');
  if(footer){
    footer.innerHTML = `${t('footer_label')} <a href="mailto:info@chriscross.at">info@chriscross.at</a> · Tel. +43 650 92 555 11`;
  }
}

function setProgress(){ 
  const prog = document.createElement('div'); 
  prog.className = 'progress'; 
  const total = STEPS.length; 
  for(let j=0;j<total;j++){ 
    const d = document.createElement('div'); 
    d.className = 'dot'+(j<=state.i?' active':''); 
    prog.appendChild(d); 
  } 
  return prog; 
} 

function renderStep(){ 
  if(state.mode!== 'steps') return; 
  stage.classList.add('active'); 
  stage.style.display = 'block'; 
  stage.innerHTML = ''; 
  const s = STEPS[state.i]; 

  // Sticky question 
  const q = document.createElement('div'); 
  q.className = 'question'; 
  q.innerHTML = `<div class="q-wrap">${s.q}</div>`; 
  stage.appendChild(q); 

  // Corner controls (now bottom)
  const left = document.createElement('div'); left.className = 'corner left'; 
  const back = document.createElement('button'); back.className='btn'; back.textContent=t('back'); back.disabled = state.i===0; back.addEventListener('click', prevStep); left.appendChild(back); 
  stage.appendChild(left); 

  const right = document.createElement('div'); right.className = 'corner right'; 
  const off = s.options.find(o=>o.ghost); 
  if(off){ const skip = document.createElement('button'); skip.className='btn'; skip.textContent=t('openOption'); skip.addEventListener('click', ()=>{ state.answers[s.id]=off.value; nextStep(); }); right.appendChild(skip); } 
  stage.appendChild(right); 

  // Options – full-bleed 
  const opts = s.options.filter(o=>!o.ghost); 
  const gallery = document.createElement('div'); 
  gallery.className = 'gallery'; 
  const vertical = window.innerWidth < 720; if(vertical) gallery.classList.add('vertical'); 
  opts.forEach(opt=>{ 
    const a = document.createElement('article'); a.className='option'; a.tabIndex=0; 
    a.innerHTML = ` 
    <img alt="${opt.label}" src="${opt.img}" /> 
    <div class="opt-center"> 
      <div class="opt-box"> 
        <h3 class="opt-title">${opt.label}</h3> 
        ${opt.desc?`<div class='opt-desc'>${opt.desc}</div>`:''} 
      </div> 
    </div>`; 
    a.addEventListener('click', ()=>{ state.answers[s.id]=opt.value; nextStep(); }); 
    a.addEventListener('keydown', (e)=>{ if(e.key==='Enter' || e.key===' '){ e.preventDefault(); a.click(); }}); 
    gallery.appendChild(a); 
  }); 
  stage.appendChild(gallery); 

  // Progress 
  stage.appendChild(setProgress()); 

  // MOBILE: smaller tiles 
  if(gallery.classList.contains('vertical')){ 
    const count = opts.length; 
    const frac = (count===2)?0.23:(count===3?0.16:0.22); 
    const qh = stage.querySelector('.q-wrap')?.getBoundingClientRect().height || 56; 
    const available = window.innerHeight - qh - 24; 
    const h = Math.max(120, Math.round(available * frac)); 
    [...gallery.children].forEach(el=>{ el.style.height = h+'px'; }); 
  } 
} 

function prevStep(){ if(state.i>0){ state.i--; renderStep(); } } 
function nextStep(){ if(state.i < STEPS.length-1){ state.i++; renderStep(); } else { showResults(); } } 
window.addEventListener('resize', ()=>{ if(state.mode==='steps') renderStep(); }); 

// ===== FILTER & RANKING ===== 
function filterShows(){ 
  const a = state.answers; let list = [...SHOWS]; 
  if(a.team && a.team!=='Offen'){ const need = a.team==='Solo'?1:(a.team==='DuoTrio'?3:4); list = list.filter(s=>s.maxDancers>=need); } 
  if(a.tech && a.tech!=='Offen'){ 
    if(a.tech==='HighTech') list = list.filter(s=>s.technik==='Ja' || s.technik==='Beides'); 
    if(a.tech==='NoTech') list = list.filter(s=>s.technik==='Nein'); 
  } 
  if(a.time==='lt1'){ list = list.filter(s=> s.fertige===true && (s.spontan===true || ['Wenig','Etwas'].includes(s.anforderungen))); } 
  else if(a.time==='1to2'){ list = list.filter(s=> s.fertige===true || s.individual==='Nein'); } 
  if(a.custom==='Ja') list = list.filter(s=> ['Ja','Beides'].includes(s.individual)); 
  if(a.custom==='Nein') list = list.filter(s=> ['Nein','Beides'].includes(s.individual)); 
  if(a.budget==='b1') list = list.filter(s=> s.budget==='Klein'); 
  if(a.budget==='b3') list = list.filter(s=> ['Klein','Mittel'].includes(s.budget)); 
  return list; 
} 
function score(list){ 
  const a = state.answers; return list.map(s=>{ let pts=0; 
    if(a.tech==='HighTech' && (s.technik==='Ja'||s.technik==='Beides')) pts+=2; 
    if(a.tech==='NoTech' && s.technik==='Nein') pts+=2; 
    if(s.fertige) pts+=1; if(['Wenig','Etwas'].includes(s.anforderungen)) pts+=1; if(s.spontan) pts+=1; 
    if(a.impact==='Wow' && s.art==='Wow-Effekt') pts+=1; if(a.impact==='Deep' && s.art==='Gemischt') pts+=1; 
    if(a.budget==='b1' && s.budget==='Klein') pts+=1; if(a.budget==='b3' && ['Klein','Mittel'].includes(s.budget)) pts+=1; 
    return {show:s,score:pts}; 
  }).sort((x,y)=> y.score - x.score || tieBreak(y.show) - tieBreak(x.show)); 
} 
function tieBreak(s){ let t=0; if(s.fertige) t+=2; if(s.anforderungen==='Wenig') t+=1; if(s.spontan) t+=1; return t; } 
function relaxedAlternatives(){ const bak = state.answers; const a = {...state.answers, budget:'offen', custom:'Offen'}; state.answers=a; const list=filterShows(); state.answers=bak; return list; } 

const recGrid = document.getElementById('rec-grid'); 
const chosenList = document.getElementById('chosen'); 
const selectionCountEl = document.getElementById('selection-count'); 
let currentRecommendations = []; let selected = new Set(); 

/* ---- Video CTA helper ---- */
function bestVideoLink(v){
  if (!v) return null;
  if (typeof v === 'string') return (v !== '#') ? v : null;
  const inPortrait = window.matchMedia('(orientation: portrait)').matches;
  return (inPortrait && v.portrait) ? v.portrait : (v.landscape || v.portrait) || null;
}
function videoCTA(rec){
  const url = bestVideoLink(rec.video);
  if (url) {
    return `<a href="${url}" class="btn" target="_blank" rel="noopener">${t('watch_video')}</a>`;
  }
  if (VIDEO_FALLBACK === 'placeholder') {
    return `<span class="btn disabled" aria-disabled="true" title="In Arbeit">${t('video_placeholder')}</span>`;
  }
  return '';
}

function showResults(){ 
  state.mode = 'results'; 
  stage.classList.remove('active'); 
  stage.style.display = 'none'; 
  stage.innerHTML = ''; 
  document.getElementById('results').style.display = 'block'; 

  applyStaticTexts(); // translate static texts at results

  let list = filterShows(); 
  let scored = score(list); 
  if (scored.length === 0) { 
    const alt = relaxedAlternatives(); 
    if (alt.length > 0) { 
      scored = score(alt);
    } 
  }

  currentRecommendations = scored.map(x => x.show);
  selected = new Set(scored.slice(0,3).map(x => x.show.id));

  renderRecommendations(); 
  window.scrollTo(0,0); 
} 

function renderRecommendations(){ 
  recGrid.innerHTML=''; 
  currentRecommendations.forEach(rec=>{ 
    const card = document.createElement('article'); card.className='card'; 
    card.innerHTML = ` 
      <div class="media"><img alt="${displayTitle(rec)}" src="${rec.img}" /><span class="badge">${t('badge')}</span></div> 
      <div class="content"> 
        <h3 class="title">${displayTitle(rec)}</h3> 
        <p class="desc">${shortDesc(rec)}</p> 
        <div class="summary">${meta(rec).map(m=>`<span class='chip'>${m}</span>`).join('')}</div> 
      </div> 
      <div class="nav"> 
        ${videoCTA(rec)}
        <label class="chip" style="cursor:pointer"><input type="checkbox" ${selected.has(rec.id)?'checked':''} data-id="${rec.id}" style="margin-right:6px"> ${ (state.lang==='de')?'auswählen':'select'}</label> 
      </div>`; 
    recGrid.appendChild(card); 
  }); 
  recGrid.querySelectorAll('input[type="checkbox"]').forEach(cb=> cb.addEventListener('change',(e)=>{ const id=e.target.getAttribute('data-id'); if(e.target.checked) selected.add(id); else selected.delete(id); renderChosen(); })); 
  renderChosen(); 
} 

function shortDesc(s){ 
  const K = {
    'laser-solo':'d_laser','led-solo':'d_ledsolo','mapping-solo':'d_mapping','led-group':'d_ledgroup',
    'urban-solo':'d_urbansolo','urban-group':'d_urbangroup','custom':'d_custom','lederhose':'d_lederhose',
    'breaking':'d_breaking','christmas':'d_christmas','mirror':'d_mirror','comedy':'d_comedy','ultimate-solo':'d_ultimate'
  };
  const key = K[s.id];
  return key ? t(key) : 'Show';
} 

function meta(s){ 
  const m=[]; 
  m.push(s.maxDancers<=1? t('meta_group_solo') : (s.maxDancers<=3? t('meta_group_duo') : t('meta_group_group'))); 
  m.push(s.technik==='Nein'? t('meta_tech_pure') : t('meta_tech_high')); 
  const dur = (s.laenge==='Kurz'? t('dur_short') : (s.laenge==='Mittel'? t('dur_mid') : t('dur_long')));
  m.push(t('meta_duration',{txt:dur}));
  const setupMap = { 'Wenig':'setup_low', 'Etwas':'setup_med', 'Hoch':'setup_high' };
  m.push(t('meta_setup',{lvl: t(setupMap[s.anforderungen]||'setup_low')}));
  return m; 
} 

function setSelectionCount(n){
  selectionCountEl.textContent = t('selected_chip',{n});
}
function renderChosen(){ 
  setSelectionCount(selected.size); 
  chosenList.innerHTML=''; 
  currentRecommendations
    .filter(r=>selected.has(r.id))
    .forEach(rec=>{ 
      const chip=document.createElement('span'); 
      chip.className='chip'; 
      chip.textContent=displayTitle(rec); 
      chosenList.appendChild(chip); 
    }); 
} 

/* RESTART */
function restartFlow(){
  state.answers = {};
  state.i = 0;
  state.mode = 'steps';
  document.getElementById('results').style.display = 'none';
  renderStep();
  window.scrollTo(0,0);
}
document.getElementById('restart-btn').addEventListener('click', restartFlow);
/* /RESTART */

// ===== FORM ===== 
const form = document.getElementById('offer-form'); 
const successEl = document.getElementById('success'); 
const errorEl = document.getElementById('error'); 
function emailValid(v){ return /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(v); } 
form.addEventListener('submit', async (e)=>{ 
  e.preventDefault(); successEl.style.display='none'; errorEl.style.display='none'; 
  const email = document.getElementById('email').value.trim(); 
  const message = document.getElementById('message').value.trim(); 
  const honey = document.getElementById('company').value; if(honey){ return; } 
  if(!emailValid(email)){ errorEl.textContent=t('email_invalid'); errorEl.style.display='block'; return; } 
  const payload = { email, message, selections: Array.from(selected), answers: state.answers, page: location.href, ts: new Date().toISOString() }; 
  if(FORM_ENDPOINT){ 
    try{ 
      const res=await fetch(FORM_ENDPOINT,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(payload)}); 
      if(!res.ok) throw new Error('Bad status '+res.status); 
      successEl.style.display='block'; 
      form.reset(); 
      return;
    }catch(err){ console.error(err);} 
  } 
  const subject = encodeURIComponent(t('mail_subject')); 
  const body = encodeURIComponent([
    (state.lang==='de'?'E-Mail':'Email')+': '+email,
    (state.lang==='de'?'Nachricht':'Message')+': '+(message||'-'),
    (state.lang==='de'?'Auswahl':'Selection')+': '+Array.from(selected).join(', '),
    (state.lang==='de'?'Antworten':'Answers')+': '+JSON.stringify(state.answers)
  ].join('\n')); 
  window.location.href = `mailto:${FALLBACK_EMAIL}?subject=${subject}&body=${body}`; 
  successEl.style.display='block'; 
}); 
document.getElementById('mailto-btn').addEventListener('click', ()=>{ 
  const email = document.getElementById('email').value.trim(); 
  const message = document.getElementById('message').value.trim(); 
  const subject = encodeURIComponent(t('mail_subject')); 
  const body = encodeURIComponent([
    (state.lang==='de'?'E-Mail':'Email')+': '+(email||'-'),
    (state.lang==='de'?'Nachricht':'Message')+': '+(message||'-'),
    (state.lang==='de'?'Auswahl':'Selection')+': '+Array.from(selected).join(', '),
    (state.lang==='de'?'Antworten':'Answers')+': '+JSON.stringify(state.answers)
  ].join('\n')); 
  window.location.href = `mailto:${FALLBACK_EMAIL}?subject=${subject}&body=${body}`; 
}); 

// ===== INIT ===== 
function buildStepsAndStart(){
  STEPS = buildSteps(state.lang);
  renderStep();
}

function showLanguageGate(){
  const gate = document.getElementById('lang');
  // Default language = DE; user picks explicitly
  document.getElementById('btn-de').addEventListener('click', ()=>{
    setLang('de');
    gate.style.display='none';
    buildStepsAndStart();
  });
  document.getElementById('btn-en').addEventListener('click', ()=>{
    setLang('en');
    gate.style.display='none';
    buildStepsAndStart();
  });

  // Preselect by browser language (no auto-continue)
  const navLang = (navigator.language||'de').toLowerCase();
  setLang(navLang.startsWith('en')?'en':'de');
}
showLanguageGate();
</script> 
</body> 
</html>